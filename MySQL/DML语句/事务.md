### 事务



**概念**：

>  由一条或多条sql语句组成，要么一起成功，要么一起失败
>
>  就是将所有需要执行的语句都绑定在一起

**分类：**

> 隐式事务：没有明显的开启和结束标记
>
> ```sql
> insert into sutinfo values（数据1，数据2...）
> ```
>
> 显式事务：具有明显的开启和结束语句
> 				一般由多条sql 语句组成，必须具有明显的开启和结束标记
>
> > 一般DDL中事务是自动提交的，不能通过手动提交
> >
> > 在DML语句默认清况下是自动提交的，可以设置手动提交




​	

**步骤：**

> ​		1、取消隐式事务自动开启的功能 
>
> ​		2、开启事务
>
> ​       3、编写失去需要的sql语句
>
> ```sql
>      insert into sutinfo values（数据1，数据2...）
>         insert into sutinfo values（数据1，数据2...）
> ```
>
> ​		4、结合事务



**#案例:**

> **#1、取消事务自动开启**
>
> ```sql
> SET autocommit = 0;
> ```
>
> **#2、开启事务**
>
> ```sql
> START TRANSACTION;
> ```
>
> **#3、编写事务的sql语句**
>
> ```sql
> 	INSERT INTO sutinfo VALUES（数据1，数据2...）
> 	INSERT INTO sutinfo VALUES（数据1，数据2...）
> ```
>
> **#4、结束事务**
>
> 提交
>
> > 提交事务执行，执行上一个commit语句之后的所有语句
>
> ```sql
> COMMIT;
> ```
>
> 回滚
>
> > 如果在事务执行的过程中，发生错误，执行回滚操作，回到最初的状态
>
> ```sql
> ROLLBACK;
> ```

**事务的四大特性**

>  原子性（Atomicity）：事务中所有操作是不可再分割的原子单位。事务中所有操作要么全部执行成功，要么全部执行失败。
>
>  一致性（Consistency）：事务执行后，数据库状态与其它业务规则保持一致。如转账业务，无论事务执行成功与否，参与转账的两个账号余额之和应该是不变的。
>
> 隔离性（Isolation）：隔离性是指在并发操作中，不同事务之间应该隔离开来，使每个并发中的事务不会相互干扰。
>
>  持久性（Durability）：一旦事务提交成功，事务中所有的数据操作都必须被持久化到数据库中，即使提交事务后，数据库马上崩溃，在数据库重启时，也必须能保证通过某种机制恢复数据。